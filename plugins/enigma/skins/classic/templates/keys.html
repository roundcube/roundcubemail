<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>
        <roundcube:object name="pagetitle"/>
    </title>
    <roundcube:include file="/includes/links.html"/>
    <link rel="stylesheet" type="text/css" href="/this/enigma.css"/>
    <script type="text/javascript" src="/functions.js"></script>
    <script type="text/javascript" src="/splitter.js"></script>
    <style type="text/css">
        #enigmakeyslist { width: <roundcube:exp expression="!empty(cookie:enigmaviewsplitter) ? cookie:enigmaviewsplitter-5 : 210"/> px; }

        #enigmacontent-box { left: <roundcube:exp expression="!empty(cookie:enigmaviewsplitter) ? cookie:enigmaviewsplitter+5 : 220"/> px;
            <roundcube:exp expression="browser:ie ? ('width:expression((parseInt(this.parentNode.offsetWidth)-'.(!empty(cookie:enigmaeviewsplitter) ? cookie:enigmaviewsplitter+5 : 220).')+\\'px\\');') : ''"/>
        }
    </style>
</head>
<body class="iframe">

<div id="prefs-title" class="boxtitle">
    <roundcube:label name="enigma.enigmakeys"/>
</div>
<div id="prefs-details" class="boxcontent">

    <div id="keystoolbar">
        <roundcube:button command="plugin.enigma-key-create" type="link" class="buttonPas create" classAct="button create" classSel="button createSel" title="enigma.createkeys" content=" "/>
        <roundcube:button command="plugin.enigma-key-delete" type="link" class="buttonPas delete" classAct="button delete" classSel="button deleteSel" title="enigma.deletekeys" content=" "/>
        <span class="separator">&nbsp;</span>
        <roundcube:button command="plugin.enigma-key-import" type="link" class="buttonPas import" classAct="button import" classSel="button importSel" title="enigma.importkeys" content=" "/>
        <roundcube:button command="plugin.enigma-key-export" type="link" class="buttonPas export" classAct="button export" classSel="button exportSel" title="enigma.exportkeys" content=" "/>
        <roundcube:button name="messagemenulink" id="messagemenulink" type="link" class="button keymenu" title="enigma.keyactions" onclick="rcmail_ui.show_popup('messagemenu');return false" content=" "/>
    </div>

    <div id="quicksearchbar" style="top: 35px; right: 10px;">
        <roundcube:button name="searchmenulink" id="searchmenulink" image="/images/icons/glass.png"/>
        <roundcube:object name="searchform" id="quicksearchbox"/>
        <roundcube:button command="reset-search" id="searchreset" image="/images/icons/reset.gif" title="resetsearch"/>
    </div>

    <div class="enigmascreen">

        <div id="enigmakeyslist">
            <div class="boxtitle">
                <roundcube:label name="enigma.keyname"/>
            </div>
            <div class="boxlistcontent">
                <roundcube:object name="keyslist" id="keys-table" class="records-table" cellspacing="0" noheader="true"/>
            </div>
            <div class="boxfooter">
                <div id="keylistcountbar" class="pagenav">
                    <roundcube:button command="firstpage" type="link" class="buttonPas firstpage" classAct="button firstpage" classSel="button firstpageSel" title="firstpage" content=" "/>
                    <roundcube:button command="previouspage" type="link" class="buttonPas prevpage" classAct="button prevpage" classSel="button prevpageSel" title="previouspage" content=" "/>
                    <roundcube:object name="countdisplay" style="padding:0 .5em; float:left"/>
                    <roundcube:button command="nextpage" type="link" class="buttonPas nextpage" classAct="button nextpage" classSel="button nextpageSel" title="nextpage" content=" "/>
                    <roundcube:button command="lastpage" type="link" class="buttonPas lastpage" classAct="button lastpage" classSel="button lastpageSel" title="lastpage" content=" "/>
                </div>
            </div>
        </div>

        <script type="text/javascript">
            var enigmaviewsplit = new rcube_splitter({id: 'enigmaviewsplitter', p1: 'enigmakeyslist', p2: 'enigmacontent-box', orientation: 'v', relative: true, start: 215});
            rcmail.add_onload('enigmaviewsplit.init()');
        </script>

        <div id="enigmacontent-box">
            <roundcube:object name="keyframe" id="keyframe" width="100%" height="100%" frameborder="0" src="/watermark.html"/>
        </div>

    </div>
</div>

<div id="messagemenu" class="popupmenu">
    <ul class="toolbarmenu">
        <li>
            <roundcube:button class="disablelink" command="enigma.key-disable" label="enigma.keydisable" target="_blank" classAct="disablelink active"/>
        </li>
        <li>
            <roundcube:button class="revokelink" command="enigma.key-revoke" label="enigma.keyrevoke" classAct="revokelink active"/>
        </li>
        <li class="separator_below">
            <roundcube:button class="sendlink" command="enigma.key-send" label="enigma.keysend" classAct="sendlink active"/>
        </li>
        <li>
            <roundcube:button class="chpasslink" command="enigma.key-chpass" label="enigma.keychpass" classAct="chpasslink active"/>
        </li>
    </ul>
</div>

<script type="text/javascript">
    rcube_init_mail_ui();
</script>

</body>
</html>
